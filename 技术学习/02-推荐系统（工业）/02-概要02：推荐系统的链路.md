![[Pasted image 20250725163939.png]]

 
## 1召回
-  从物品数据库中快速取回一些物品
	-  数据库中有上万条笔记，用户调用时启动几条召回通道，每条取出几百条笔记，总共上千条
- 召回通道：协同过滤、双塔模型、关注的作者etc。
![[Pasted image 20250726181436.png]]



## 2 粗排
- 从几千篇笔记中找出用户感兴趣的笔记
	- 使用小规模机器学习等算法找出用户最感兴趣的几百篇笔记

## 3 精排
- 大规模神经网络
- 刚刚筛选出的几百篇笔记
- 逐一打兴趣分数 
- 使用更多的特征，计算量更大
> 与粗排相似，只是使用的数据特征更多，模型更大

![[粗排与精排.png]]
## 4 重排
- 根据感兴趣和**多样性**重排
	- 多样性抽样（如：MMR、DPP）：从几百篇中得到几十篇
- 内容打散、插入广告和运营
	- 规则打散相似内容
	- 根据生态调整
- 最后展示给用户的物品
- 代码最为复杂：几千行



## 总结
- **漏斗**
	- **召回**：多条通道，获取几千篇笔记
	- **粗排**：小规模神经网络对上述笔记打分（并保持多样性），选出最高分的几百篇。
- **精排**：大规模神经网络对粗排得到的几百篇打分。（无需筛选，直接丢给重排）。
- **重排**：多样性抽选、规则打散、广告插入和运营笔记。


