## 输入输出
- 输入：图片
- 输出：带有目标的标注

## 数据集好坏
- 数据集内容的数量
- 能充分反应实际场景
- 较高的标注质量
## 常见数据集

可以在kaggle或者huggingface获得，现在paperwithcode已被停用。

### COCO
Common Objects in Context
主要使用COCO 2014和COCO 2017两个数据集。
[dataset web](https://cocodataset.org/#home)

- **发布年份**：2014（后续有 2015、2017 等更新版本）
    
- **特点**：
    
    - **类别数**：80 个常见物体类别（如人、车、猫、狗、椅子等）
        
    - **数据量大**：约 33 万张图像，其中 20 万张有标注，标注对象超过 150 万个。
        
    - **标注形式**：提供物体的 **边界框（bbox）**、**分割掩码（mask）**、关键点（人体姿态点）等多种标注。
        
    - **场景复杂**：图片中物体数量多，且常有遮挡、尺度变化、背景复杂等情况，适合高难度检测任务。
- **常用版本**：
    - **train2017**（训练集）：118,287 张
	    - annotations下的instances_train2017.json是对应的目标检测的标注
    - **val2017**（验证集）：5,000 张
    - **test2017**（测试集）：约 40,000 张（无公开标签，用于比赛提交）

可以用于目标检测、目标分割、看图说话。
自己需要下载三个部分：
- Train Images
- Val Images
- Train/Val annotations

> #快捷键
> mac中`shift`+`option`+`F`格式化


2014年大概20个G。测试集没有提供标注，只有竞赛方有。

#### annotation

![[coco-annotat-structure.png]]
**images**
```json
{

"license": 4,

"file_name": "000000397133.jpg",

"coco_url": "http://images.cocodataset.org/val2017/000000397133.jpg",

"height": 427,

"width": 640,

"date_captured": "2013-11-14 17:02:52",

"flickr_url": "http://farm7.staticflickr.com/6116/6255196340_da26cf2c9e_z.jpg",

"id": 397133

},
```
- file_name
- height
- width
- id

**Annotation**

```json
{

"segmentation": [

[

略，

]

],

"area": 1481.3806499999994,

"iscrowd": 0,

"image_id": 397133,

"bbox": [

217.62,

240.54,

38.99,

57.75

],

"category_id": 44,

"id": 82445

},
```

只关注：iamge_id, bbox和category_id字段，就是目标检测需要的说那个字段。
- 一个图片可能有多个标注，可通过image_id关联找到。
- category_id也在annotation的category字段存储
```json
"categories": [

{

"supercategory": "person",

"id": 1,

"name": "person"

},

{

"supercategory": "vehicle",

"id": 2,

"name": "bicycle"

},
```
bbox
-  需要注意的是和VOC标注的四个角的坐标不同，COCO
	- Xmin, Ymin, Xmax, Ymax

 

### VOC
- 每年更新一次，常用的版本是 **VOC2007** 和 **VOC2012**
- **特点**：
    
    - **类别数**：20 个类别（如人、鸟、猫、牛、狗、马、羊、飞机、车、自行车等）。
        
    - **标注形式**：边界框（bbox）和分类标签，部分还提供分割掩码（用于语义分割任务）。
        
    - **图片分辨率**：大多在 500×375 左右，场景相对 COCO 简单，物体数量少。
- 

- 
2007 on Kaggle ： https://www.kaggle.com/datasets/zaraks/pascal-voc-2007 
- train: 2501
- valid: 2510
- test: 4952
- total: 9963 images, 24640 target
![[VOC2007.png]]
-   JPEGImages和Annotation的命名对应（主要使用）  
	- JPEGImage是图片
	- Annotaiton是标注（格式为xml）
- ImageSets：其他任务
	- 与Segmentation两个任务相对应。


2012 on Kaggle： https://www.kaggle.com/datasets/huanghanchina/pascal-voc-2012
- 训练集（train）：5,717 张    
- 验证集（val）：5,823 张
- 测试集（test）：无公开标签（用于挑战赛）。
- 总计：11,540 张有标签的图片。
- 相比 2007 数据量更大，图像更加多样化，常与 VOC2007 合并使用以扩充训练集。

#### 理解Annotation
1. 图像基本信息
```xml
<size>

<width>500</width>

<height>333</height>

<depth>3</depth>

</size>
```


2. 是否有分割标注
```xml
<segmented>0</segmented>
```

3.  目标检测
```xml
<object>

<name>car</name>

<pose>Unspecified</pose>

<truncated>1</truncated>

<difficult>0</difficult>

<bndbox>

<xmin>141</xmin>

<ymin>50</ymin>

<xmax>500</xmax>

<ymax>330</ymax>

</bndbox>

</object> 
```

- `<object>`表示一个标注的目标物体，是最外层标签。
-   `<name>`
    
    物体类别名称，例如 car（汽车）。
    
- `<pose>`
    
    物体姿态，表示物体在图像中的朝向。
    
    - "Unspecified" 表示姿态未指定。
        
    - 其他可能值有 "Left"、"Right"、"Frontal" 等。
        
    
- `<truncated>`
    
    表示该物体是否被图像边缘截断。
    
    - 1 表示截断（物体部分不可见）。
        
    - 0 表示完整显示。
        
    
- `<difficult>`    
    表示该目标是否难以检测。
    - 1 表示困难目标（例如模糊、小尺寸等）。
    - 0 表示普通目标。
    
- `<bndbox>`
    
    物体的边界框，定义了目标在图像中的矩形区域，包含四个坐标：
    
    - `<xmin>`：边界框左上角的横坐标（像素）。
        
    - `<ymin>`：边界框左上角的纵坐标（像素）。
        
    - `<xmax>`：边界框右下角的横坐标（像素）。    
    - `<ymax>`：边界框右下角的纵坐标（像素）。

一个case图像下可能有多个object，会并列在xml文件中。

![[expample-2.png]]


## YOLO 标注格式

![[yolo-annotate-1.png]]

YOLO 提出了自己的标注格式，是现在较为常用的一种标注格式。
其标注文件通常为 **`.txt`** 格式，每个图像对应一个标注文件，文件名与图像名相同（但扩展名不同）。

---

### 1. 基本格式

YOLO 标注文件中的每一行代表一个目标，格式如下：
(class_id, x_center, y_center, width, height)

- **class_id**：类别编号（从 `0` 开始）
- **x_center, y_center**：目标框中心点的 **相对坐标**（相对于图像宽高，范围 0~1）
- **width, height**：目标框的 **相对宽高**（相对于图像宽高，正则化后，范围 0~1）
### 2. 坐标说明


YOLO 使用 **归一化坐标**，计算方式如下：
$$
\begin{aligned}
x_{\text{center}} &= \frac{x_{\min} + x_{\max}}{2 \times W} \\
y_{\text{center}} &= \frac{y_{\min} + y_{\max}}{2 \times H} \\
\text{width} &= \frac{x_{\max} - x_{\min}}{W} \\
\text{height} &= \frac{y_{\max} - y_{\min}}{H}
\end{aligned}
$$


其中 `(xmin, ymin)` 是左上角坐标，`(xmax, ymax)` 是右下角坐标。